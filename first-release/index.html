<!doctype html>
<html class="no-js" lang="en">
    <head>
        <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>First release of TQL: the easy-to-use ORM for Rust</title>

    <link rel="stylesheet" type="text/css" href="http://tql-rs.ml//assets/css/styles_feeling_responsive.css">

    <!-- Search Engine Optimization -->
    <meta name="description" content="After a couple of weeks of work, I&amp;#8217;m now happy to release the first version of tql, the easy-to-use ORM for Rust.




New features


While the focus was to make tql work on the stable version of the compile, I also added some new features.


SQLite

The most notable new feature is the new support for SQLite:
now tql supports SQLite as well as PostgreSQL.
The support for SQLite is almost as complete as the one for PostgreSQL:
the only missing function is not implemented because the backend (SQLite) does not support it.
I might implement it some day since I have a few ideas about how to workaround this issue.



Connection Management

Now, it is possible to specify the connection when using the sql!() macro.
That was possible before to switch to procedural macros and was removed by lack of time, but now it is back.
Remember that by default, sql!() will use the identifier connection and try to execute the SQL query on the connection it represents.
Now, it&amp;#8217;s possible to specify it as a first argument:



sql!(cx, TodoItem.get(id).update(done = true))



where cx is the connection.



Error handling

I also improved the error handling of the generated code:
now instead of using expect(), all the errors will get to the caller of the sql!() macro.



Design issue

I also fixed a design issue, which took me a while to fix.





Bug fix


There was a bug with Option values and now it is fixed.
This resulted in a change a syntax.
While it was possible before to call insert() without Some:



sql!(TableInsertExpr.insert(optional_field = 12));



now, it is required:



sql!(TableInsertExpr.insert(optional_field = Some(12)));



While I could have kept the same syntax, it would have made the message in case of error less understandable.
I might be able to support the former syntax in the future.




Conclusion


Now it&amp;#8217;s time for you to test tql, report bugs, suggest enhancements and start contributing!
The library is still in very early stage, but I already use it in one of my projects, titanium.


Please comment on Reddit.">
    
    <link rel="canonical" href="http://tql-rs.ml//first-release/">

    <link rel="stylesheet" href="//css/asciidoc-pygments.css">

    <link type="text/plain" rel="author" href="http://tql-rs.ml//humans.txt">

    

	<link rel="icon" sizes="32x32" href="http://tql-rs.ml/assets/img/favicon-32x32.png">

	<link rel="icon" sizes="192x192" href="http://tql-rs.ml/assets/img/touch-icon-192x192.png">

	<link rel="apple-touch-icon-precomposed" sizes="180x180" href="http://tql-rs.ml/assets/img/apple-touch-icon-180x180-precomposed.png">

	<link rel="apple-touch-icon-precomposed" sizes="152x152" href="http://tql-rs.ml/assets/img/apple-touch-icon-152x152-precomposed.png">

	<link rel="apple-touch-icon-precomposed" sizes="144x144" href="http://tql-rs.ml/assets/img/apple-touch-icon-144x144-precomposed.png">

	<link rel="apple-touch-icon-precomposed" sizes="120x120" href="http://tql-rs.ml/assets/img/apple-touch-icon-120x120-precomposed.png">

	<link rel="apple-touch-icon-precomposed" sizes="114x114" href="http://tql-rs.ml/assets/img/apple-touch-icon-114x114-precomposed.png">

	
	<link rel="apple-touch-icon-precomposed" sizes="76x76" href="http://tql-rs.ml/assets/img/apple-touch-icon-76x76-precomposed.png">

	<link rel="apple-touch-icon-precomposed" sizes="72x72" href="http://tql-rs.ml/assets/img/apple-touch-icon-72x72-precomposed.png">

	<link rel="apple-touch-icon-precomposed" href="http://tql-rs.ml/assets/img/apple-touch-icon-precomposed.png">	

	<meta name="msapplication-TileImage" content="http://tql-rs.ml/assets/img/msapplication_tileimage.png">

	<meta name="msapplication-TileColor" content="#fabb00">


    

    </head>
    <body id="top-of-page" class="page-fullwidth">
        
        
<div id="navigation" class="sticky">
  <nav class="top-bar" role="navigation" data-topbar>
    <ul class="title-area">
      <li class="name">
      <h1 class="show-for-small-only"><a href="http://tql-rs.ml/" class="icon-tree"> TQL</a></h1>
    </li>
       <!-- Remove the class "menu-icon" to get rid of menu icon. Take out "Menu" to just have icon alone -->
      <li class="toggle-topbar menu-icon"><a href="#"><span>Nav</span></a></li>
    </ul>
    <section class="top-bar-section">

      <ul class="right">
        

              

          
          
        

              

          
          
        

              

          
          
        

              

          
          
        

              

          
          
            
            
              <li class="divider"></li>
              <li><a  href="http://tql-rs.ml//search/">Search</a></li>

            
            
          
        
        
      </ul>

      <ul class="left">
        

              

          
          

            
            
              <li><a  href="http://tql-rs.ml//">Index</a></li>
              <li class="divider"></li>

            
            
          
        

              

          
          

            
            
              <li><a  href="http://tql-rs.ml//getting-started/">Getting Started</a></li>
              <li class="divider"></li>

            
            
          
        

              

          
          

            
            
              <li><a  href="http://tql-rs.ml//documentation/">Documentation</a></li>
              <li class="divider"></li>

            
            
          
        

              

          
          

            
            

              <li class="has-dropdown">
                <a  href="http://tql-rs.ml//blog/">Blog</a>

                  <ul class="dropdown">
                    

                      

                      <li><a  href="http://tql-rs.ml//blog/archive/">Blog Archive</a></li>
                    
                  </ul>

              </li>
              <li class="divider"></li>
            
          
        

              

          
          
        
        
      </ul>
    </section>
  </nav>
</div><!-- /#navigation -->

        

        

<div id="masthead-no-image-header">
    <div class="row">
        <div class="small-12 columns">
            <a id="logo" href="http://tql-rs.ml/" title="TQL – An easy-to-use ORM from Rust">
                <img src="http://tql-rs.ml//assets/img/logo.png" alt="TQL – An easy-to-use ORM from Rust">
            </a>
        </div><!-- /.small-12.columns -->
    </div><!-- /.row -->
</div><!-- /#masthead -->









        


<div class="row t30">
	<div class="medium-12 columns">
		<article>
			<header>
				
				<h1>First release of TQL: the easy-to-use ORM for Rust</h1>
			</header>

			

			<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p><a href="http://tql-rs.ml/tql-easy-orm">After a couple of weeks of work</a>, I&#8217;m now happy to release the first version of <a href="https://github.com/antoyo/tql">tql</a>, the easy-to-use ORM for Rust.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="new-features">New features</h2>
<div class="sectionbody">
<div class="paragraph">
<p>While the focus was to make <code>tql</code> work on the stable version of the compile, I also added some new features.</p>
</div>
<div class="sect2">
<h3 id="sqlite">SQLite</h3>
<div class="paragraph">
<p>The most notable new feature is the new support for SQLite:
now tql supports SQLite as well as PostgreSQL.
The support for SQLite is almost as complete as the one for PostgreSQL:
the only missing function is not implemented because the backend (SQLite) does not support it.
I might implement it some day since I have a few ideas about how to workaround this issue.</p>
</div>
</div>
<div class="sect2">
<h3 id="connection-management">Connection Management</h3>
<div class="paragraph">
<p>Now, it is possible to specify the connection when using the <code>sql!()</code> macro.
That was possible before to switch to procedural macros and was removed by lack of time, but now it is back.
Remember that by default, <code>sql!()</code> will use the identifier <code>connection</code> and try to execute the SQL query on the connection it represents.
Now, it&#8217;s possible to specify it as a first argument:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="rust"><span></span><span class="tok-n">sql</span><span class="tok-o">!</span><span class="tok-p">(</span><span class="tok-n">cx</span><span class="tok-p">,</span><span class="tok-w"> </span><span class="tok-n">TodoItem</span><span class="tok-p">.</span><span class="tok-n">get</span><span class="tok-p">(</span><span class="tok-n">id</span><span class="tok-p">).</span><span class="tok-n">update</span><span class="tok-p">(</span><span class="tok-n">done</span><span class="tok-w"> </span><span class="tok-o">=</span><span class="tok-w"> </span><span class="tok-kc">true</span><span class="tok-p">))</span><span class="tok-w"></span></code></pre>
</div>
</div>
<div class="paragraph">
<p>where <code>cx</code> is the connection.</p>
</div>
</div>
<div class="sect2">
<h3 id="error-handling">Error handling</h3>
<div class="paragraph">
<p>I also improved the error handling of the generated code:
now instead of using <code>expect()</code>, all the errors will get to the caller of the <code>sql!()</code> macro.</p>
</div>
</div>
<div class="sect2">
<h3 id="design-issue">Design issue</h3>
<div class="paragraph">
<p>I also fixed <a href="https://github.com/antoyo/tql/issues/16">a design issue</a>, which took me a while to fix.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="bug-fix">Bug fix</h2>
<div class="sectionbody">
<div class="paragraph">
<p>There was a <a href="https://github.com/antoyo/tql/issues/21">bug with <code>Option</code> values</a> and now it is fixed.
This resulted in a change a syntax.
While it was possible before to call <code>insert()</code> without <code>Some</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="rust"><span></span><span class="tok-n">sql</span><span class="tok-o">!</span><span class="tok-p">(</span><span class="tok-n">TableInsertExpr</span><span class="tok-p">.</span><span class="tok-n">insert</span><span class="tok-p">(</span><span class="tok-n">optional_field</span><span class="tok-w"> </span><span class="tok-o">=</span><span class="tok-w"> </span><span class="tok-mi">12</span><span class="tok-p">));</span><span class="tok-w"></span></code></pre>
</div>
</div>
<div class="paragraph">
<p>now, it is required:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="rust"><span></span><span class="tok-n">sql</span><span class="tok-o">!</span><span class="tok-p">(</span><span class="tok-n">TableInsertExpr</span><span class="tok-p">.</span><span class="tok-n">insert</span><span class="tok-p">(</span><span class="tok-n">optional_field</span><span class="tok-w"> </span><span class="tok-o">=</span><span class="tok-w"> </span><span class="tok-nb">Some</span><span class="tok-p">(</span><span class="tok-mi">12</span><span class="tok-p">)));</span><span class="tok-w"></span></code></pre>
</div>
</div>
<div class="paragraph">
<p>While I could have kept the same syntax, it would have made the message in case of error less understandable.
I might be able to support the former syntax in the future.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="conclusion">Conclusion</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Now it&#8217;s time for you to test <code>tql</code>, report bugs, suggest enhancements and start contributing!
The library is still in very early stage, but I already use it in one of my projects, <a href="https://github.com/antoyo/titanium">titanium</a>.</p>
</div>
<div class="paragraph">
<p>Please comment on Reddit.</p>
</div>
</div>
</div>
		</article>
	</div><!-- /.medium-12.columns -->
</div><!-- /.row -->




        
            <div id="up-to-top" class="row">
      <div class="small-12 columns" style="text-align: right;">
        <a class="iconfont" href="#top-of-page">&#xf108;</a>
      </div><!-- /.small-12.columns -->
    </div><!-- /.row -->


    <footer id="footer-content" class="bg-grau">
      <div id="footer">
        <div class="row">
          <div class="medium-6 large-5 columns">
            <h5 class="shadow-black">About This Site</h5>

            <p class="shadow-black">
              TQL is a Rust ORM that is easy to use, checks the validity and generate your queries at compile-time
            </p>
          </div><!-- /.large-6.columns -->


          <div class="small-6 medium-3 large-3 large-offset-1 columns">
            
              
                <h5 class="shadow-black">News Feed</h5>
              
            
              
            
              
            

              <ul class="no-bullet shadow-black">
              
                
                  <li >
                    <a href="http://tql-rs.ml/"  title=""></a>
                  </li>
              
                
                  <li >
                    <a href="http://tql-rs.ml//feed.xml"  title="Subscribe to RSS Feed">RSS</a>
                  </li>
              
                
                  <li >
                    <a href="http://tql-rs.ml//atom.xml"  title="Subscribe to Atom Feed">Atom</a>
                  </li>
              
              </ul>
          </div><!-- /.large-4.columns -->


          <div class="small-6 medium-3 large-3 columns">
            
              
                <h5 class="shadow-black">Links</h5>
              
            
              
            
              
            

            <ul class="no-bullet shadow-black">
            
              
                <li >
                  <a href="http://tql-rs.ml/"  title=""></a>
                </li>
            
              
                <li >
                  <a href="https://github.com/antoyo/tql" target="_blank"  title="">GitHub</a>
                </li>
            
              
                <li >
                  <a href="https://gitter.im/tql-rs/Lobby" target="_blank"  title="">Gitter</a>
                </li>
            
            </ul>
          </div><!-- /.large-3.columns -->
        </div><!-- /.row -->

      </div><!-- /#footer -->


      <div id="subfooter">
        <nav class="row">
          <section id="subfooter-left" class="small-12 medium-6 text-right columns credits">
              Contribute on GitHub
          </section>

          <section id="subfooter-right" class="small-12 medium-6 columns">
            <ul class="inline-list social-icons">
            
              <li><a href="http://github.com/antoyo/tql" class="icon-github" title="TQL"></a></li>
            
            </ul>
          </section>
        </nav>
      </div><!-- /#subfooter -->
    </footer>

        
    </body>
</html>

